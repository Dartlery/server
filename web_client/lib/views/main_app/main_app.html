<auth-status [(authorized)]="userLoggedIn" ></auth-status>

<div class="content">
    <router-outlet></router-outlet>
    <paginator></paginator>
    <material-fab *ngIf="showAddButton" raised (trigger)="addClicked()" style="position: fixed; right: 8pt; bottom: 8pt;z-index:10;" class="red">
        <glyph icon="add"></glyph>
    </material-fab>

</div>


<material-sidenav class="leftSideNav" [(open)]="sideNavOpen" [overlay]="true">
    <material-toolbar title="{{currentUser?.name??''}}" >
        <div class="right-content">
            <material-button raised
                             (trigger)="clearAuthentication()"
                             class="blue" *ngIf="userLoggedIn">
                Log Out
            </material-button>
            <material-button raised
                             (trigger)="promptForAuthentication()"
                             class="blue" *ngIf="!userLoggedIn" >
                Log In
            </material-button>
        </div>
    </material-toolbar>
    <div id="menu">

        <menu-item icon="view_module" [routerLink]="['Home']">Browse Items</menu-item>
        <menu-separator></menu-separator>
        <menu-item icon="merge_type" [routerLink]="['Deduplicate']">Deduplicate</menu-item>
        <menu-separator></menu-separator>
        <menu-item icon="label" [routerLink]="['Tags']">Tags</menu-item>
        <menu-item icon="label_outline" [routerLink]="['TagCategories']">Tag Categories</menu-item>
        <menu-item icon="person" [routerLink]="['Users']">Users</menu-item>
    </div>
</material-sidenav>


<material-toolbar icon="menu"  (iconClick)="navBarIconClicked()" title="{{pageTitle}}" [mediumTall]="showSearchBar">
    <div class="right-content">
        <!-- Right-side content -->
        <material-button icon (trigger)="openUploadWindow()"><glyph icon="file_upload"></glyph></material-button>

        <material-input *ngIf="showSearch" [(ngModel)]="query" style="color:white;" label="Search" leadingGlyph="search" (keyup)="searchKeyup($event)" ></material-input>

        <material-button *ngIf="showDeleteButton" icon (trigger)="deleteClicked()"><glyph icon="delete"></glyph></material-button>
        <!--<material-button *ngIf="showAddButton" icon (trigger)="addClicked()"><glyph icon="add"></glyph></material-button>-->
        <material-button *ngIf="showTagButton" icon (trigger)="tagClicked()"><glyph icon="label"></glyph></material-button>
        <material-button *ngIf="showCompareButton" icon (trigger)="compareClicked()"><glyph icon="compare"></glyph></material-button>
        <material-button *ngIf="showRefreshButton" icon (trigger)="refreshClicked()"><glyph icon="refresh"></glyph></material-button>
        <material-button *ngIf="showOpenInNewButton" icon (trigger)="openInNewClicked()"><glyph icon="open_in_new"></glyph></material-button>
    </div>
    <div class="middle-content">
        <tag-entry style="width: 100%" (selectedChanged)="tagSearchChanged($event)"></tag-entry>
    </div>
</material-toolbar>



<login-form [(visible)]="isLoginOpen" id="userAuthElement"></login-form>
<item-upload [(visible)]="isUploadOpen" id="uploadElement"></item-upload>

<modal [visible]="confirmDeleteVisible">
    <material-dialog class="basic-dialog">
        <h3 header>Delete</h3>
        <p>
            Are you sure you wish to delete?
        </p>
        <div footer style="text-align: right">
            <material-yes-no-buttons yesHighlighted
                                     yesText="Delete" (yes)="confirmDelete()"
                                     noText="Cancel" (no)="confirmDeleteVisible = false">
            </material-yes-no-buttons>
        </div>
    </material-dialog>
</modal>

<modal [visible]="errorMessageVisible">
    <material-dialog class="basic-dialog">
        <h3 header>{{errorMessageHeader}}</h3>
        <p>
            {{errorMessage}}
        </p>
        <div footer style="text-align: right">
            <material-button (trigger)="errorMessageVisible=false">OK</material-button>
        </div>
    </material-dialog>
</modal>